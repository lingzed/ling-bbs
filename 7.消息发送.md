# 1 消息表

用于记录发送的消息，表结构如下：

```sql
create table user_message
(
    message_id       int auto_increment comment '消息id'
        primary key,
    received_user_id varchar(15)   not null comment '接收人的user_id',
    article_id       varchar(15)   null comment '文章id',
    article_title    varchar(150)  null comment '文章标题',
    comment_id       int           null comment '评论id',
    send_user_id     varchar(15)   not null comment '发送人的user_id',
    send_nick_name   varchar(20)   null comment '发送人的昵称',
    message_type     tinyint       not null comment '消息类型，0：系统消息，1：评论，2：文章点赞，3：评论点赞4：附件下载',
    message_content  varchar(1000) null comment '消息内容',
    status           tinyint       not null comment '消息状态，0：未读，1：已读',
    create_time      datetime      not null comment '创建时间',
    update_time      datetime      not null comment '修改时间',
    constraint user_message_pk_2
        unique (article_id, comment_id, send_user_id, message_type)
)
    comment '用户消息';

create index user_message_message_type_index
    on user_message (message_type);

create index user_message_received_user_id_index
    on user_message (received_user_id);

create index user_message_status_index
    on user_message (status);
```

> ⚠ 注意
>
> 这里的消息不仅仅是简单地记录某人向某人发送了一条消息，还包括一些操作后产生的记录。例如，当我为某篇文章点赞时，消息表会记录一条我为该文章点赞的消息。与其说这是传统意义上的消息，更像是**一种操作记录**或**事件日志**。