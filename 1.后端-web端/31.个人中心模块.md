# 1 ä¸ªäººä¸­å¿ƒ

è¿™ä¸ªæ¨¡å—ä¸»è¦å±•ç¤ºä¸ªäººçš„ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜µç§°ã€å¤´åƒã€æè¿°ï¼Œå‘æ–‡å†å²ï¼Œè¯„è®ºå†å²ï¼Œç‚¹èµå†å²ï¼Œç§¯åˆ†è®°å½•ç­‰ã€‚

ä¸ªäººä¸­å¿ƒçš„æ‰€æœ‰æ¥å£ç”±`UserCenterController`ç®¡ç†ã€‚

## 1.1 ğŸŒåŠ è½½ä¸ªäººä¿¡æ¯æ¥å£

è¯·æ±‚åœ°å€ï¼š

```http
GET /web/userCenter/{userId}
```

è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜   |
| ------ | -------- | -------- | ------ |
| userId | `string` | `true`   | ç”¨æˆ·id |

è¿”å›ï¼š

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": {
        "userId": "9619980088",
        "avatar": "msakm",
        "nickName": "ling",
        "gender": 1,
        "description": "xxxxxxxxxxxxxxxxxx",
        "currentPoints": 58,
        "joinTime": "2024-12-06",
        "lastLoginTime": "2025-03-20",
        "postCount": 1,
        "receiveLikeCount": 3,
        "admin": false
    }
}
```

### 1.1.2 æ¥å£å®ç°

è¿™ä¸ªæ¥å£ç”¨äºè¯·æ±‚ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œå‰ç«¯å±•ç¤ºä¸ªäººä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å­—æ®µï¼š

- å¤´åƒ
- æ˜µç§°
- æ€§åˆ«
- æè¿°
- å½“å‰ç§¯åˆ†
- åŠ å…¥æ—¶é—´
- æœ€åç™»å½•æ—¶é—´
- å‘æ–‡æ•°é‡(å·²å®¡æ ¸)
- æ¥æ”¶ç‚¹èµæ•°é‡
- æ˜¯å¦ä¸ºç®¡ç†å‘˜

æˆ‘ä»¬éœ€è¦å°†è¿™äº›å­—æ®µæŸ¥è¯¢å‡ºæ¥ã€‚è¿™ä¸ªæ¥å£æ˜¯éç™»å½•æ¥å£ï¼Œä»»ä½•äººéƒ½èƒ½é€šè¿‡idè®¿é—®ï¼Œå‰ææ˜¯idå­˜åœ¨ã€‚

åœ¨ä¸ªäººä¿¡æ¯ä¸­ï¼Œå¤§éƒ¨åˆ†å­—æ®µéƒ½å¯ä»¥ä»`user_info`è¡¨ä¸­æŸ¥è¯¢å‡ºæ¥ã€‚åªæœ‰å‘æ–‡æ•°é‡å’Œæ¥æ”¶ç‚¹èµæ•°é‡éœ€è¦é¢å¤–ç»Ÿè®¡ã€‚æˆ‘ä»¬é¦–å…ˆçœ‹æ¥å—ç‚¹èµçš„æ•°é‡ï¼Œè¢«ç‚¹èµçš„å¯¹è±¡æ˜¯ç”¨æˆ·å‘å¸ƒçš„æ–‡ç« æˆ–è¯„è®ºï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡æ–‡ç« æˆ–è¯„è®ºçš„ä½œè€…id = ç”¨æˆ·çš„idæ¥æŸ¥è¯¢è®¡æ•°å³å¯æŸ¥è¯¢å‡ºæ¥å—ç‚¹èµçš„æ•°é‡ã€‚

ç„¶åæ˜¯å‘å¸ƒæ–‡ç« çš„æ•°é‡ï¼Œè¿™é‡Œåªå±•ç¤ºå·²å®¡æ ¸çš„æ–‡ç« çš„æ•°é‡ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ç»Ÿè®¡ä»¥å½“å‰ç”¨æˆ·ä¸ºä½œè€…å‘å¸ƒçš„å·²å®¡æ ¸æ–‡ç« çš„æ•°é‡å³å¯ç»Ÿè®¡å‘å¸ƒæ–‡ç« çš„æ•°é‡ï¼Œå…¶SQLå¦‚ä¸‹ï¼š

```xml
<!-- é€šè¿‡ userId ç»Ÿè®¡å·²å®¡æ ¸æ•°é‡ -->
<select id="countByUserAndAudit" resultType="java.lang.Long">
    select count(0) total from article where user_id = #{userId} and status = 2
</select>
```

åœ¨`UserCenterController`ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŠ è½½ä¸ªäººä¿¡æ¯çš„æ¥å£`loadUserinfo()`ï¼š

```java
/**
     * åŠ è½½ä¸ªäººä¸­å¿ƒä¸ªäººä¿¡æ¯æ¥å£
     *
     * @param userId
     * @return
     */
    @GetMapping("/{userId}")
    @AccessControl
    public Result<UserinfoVO> loadUserinfo(@PathVariable @Validation(max = 10) String userId) {
        UserInfo userinfo = checkUserId(userId);

        UserinfoVO userinfoVO = new UserinfoVO();
        BeanUtils.copyProperties(userinfo, userinfoVO);
        userinfoVO.setCurrentPoints(userinfo.getCurrentIntegral());
        LikeRecordQuery likeRecordQuery = new LikeRecordQuery();
        likeRecordQuery.setTargetAuthorId(userId);
        Long receiveLikeTotal = likeRecordService.findTotalByCondition(likeRecordQuery); // æ¥å—ç‚¹èµçš„æ•°é‡
        Long postTotal = articleService.countByUserAndAudit(userId);  // å‘æ–‡æ•°é‡, ä»…ç»Ÿè®¡å·²å®¡æ ¸æ–‡ç« 
        userinfoVO.setPostCount(postTotal);
        userinfoVO.setReceiveLikeCount(receiveLikeTotal);

        return Result.success(userinfoVO);
    }

// æ ¡éªŒuserId
    private UserInfo checkUserId(String userId) {
        UserInfo userinfo = userInfoService.findById(userId);
        if (Objects.isNull(userinfo) || Objects.equals(UserStatusEnum.DISABLE.getStatus(), userinfo.getStatus()))
            throw new BusinessException(ResponseCodeEnum.CODE_404);
        return userinfo;
    }
```

é¦–å…ˆè¦æ£€æŸ¥ç”¨æˆ·idçš„æœ‰æ•ˆæ€§ï¼Œæˆ‘å•ç‹¬å®šä¹‰ä¸€ä¸ªæ–¹æ³•`checkUserId()`ç”¨æ¥å¹²è¿™ä¸ªäº‹ï¼Œæ ¡éªŒé€šè¿‡åï¼Œè¿”å›`UserInfo`ã€‚

ç„¶åå®šä¹‰ä¸€ä¸ªè§†å›¾å¯¹è±¡ï¼Œå°†`UserInfo`çš„å­—æ®µå¤åˆ¶åˆ°è§†å›¾å¯¹è±¡ä¸­ï¼Œç„¶åç»Ÿè®¡æ¥å—ç‚¹èµæ•°é‡å’Œå‘æ–‡æ•°é‡ï¼Œè°ƒç”¨`LikeRecordService`çš„æ¡ä»¶ç»Ÿè®¡æ–¹æ³•ï¼Œé€šè¿‡`ä½œè€… = userId`æŸ¥è¯¢æ•°é‡ã€‚

ç„¶åï¼Œè°ƒç”¨`ArticleService`çš„`countByUserAndAudit()`æ–¹æ³•ç»Ÿè®¡å‘æ–‡æ•°é‡ï¼Œæ¥å£å¦‚ä¸‹ï¼š

```java
/**
     * é€šè¿‡ userId è®¡æ•°å·²å®¡æ ¸æ•°é‡
     *
     * @param userId
     * @return
     */
    Long countByUserAndAudit(String userId);
```

å®ç°ï¼š

```java
@Override
    public Long countByUserAndAudit(String userId) {
        return articleMapper.countByUserAndAudit(userId);
    }
```

æœ€åå°†æ•°é‡å¤åˆ¶åˆ°è§†å›¾å¯¹è±¡ä¸­ï¼Œè¿”å›è§†å›¾å¯¹è±¡ã€‚

## 1.2 ğŸŒåŠ è½½å‘æ–‡å†å²çš„æ¥å£

è¯·æ±‚åœ°å€ï¼š

```HTTP
GET /web/userCenter/{userId}/posts
```

è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜   |
| ------ | -------- | -------- | ------ |
| userId | `string` | `true`   | ç”¨æˆ·id |

è¿”å›ï¼š

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": [
        {
            "articleId": "uukicbc29eqo",
            "boardId": 3,
            "boardName": "æ¸¸æˆæ”»ç•¥",
            "pBoardId": 1,
            "pBoardName": "æ¸¸æˆ",
            "avatar": "msakm",
            "userId": "9619980088",
            "nickName": "ling",
            "userIdAddress": "å››å·çœ",
            "title": "å·«å¸ˆ3æ”»ç•¥1",
            "cover": null,
            "content": null,
            "mdContent": null,
            "editorType": 0,
            "summary": "å·«å¸ˆ3è‰¯å¿ƒæ”»ç•¥",
            "readCount": 13,
            "likeCount": 1,
            "topType": 1,
            "attachmentType": 1,
            "status": 2,
            "createTime": "2025-01-06 16:38:14",
            "commentCount": 25
        }
    ]
}
```

### 1.2.1 æ¥å£å®ç°

è¯¥æ¥å£ç”¨äºæŸ¥è¯¢æŒ‡å®šç”¨æˆ·å‘å¸ƒçš„æ–‡ç« åˆ—è¡¨ï¼ŒåŒæ—¶æ”¯æŒåŠ¨æ€æƒé™æ§åˆ¶ï¼Œä»¥é€‚é…ä¸åŒç”¨æˆ·è§’è‰²çš„è®¿é—®éœ€æ±‚ã€‚æœ¬æ¥å£ä¸º**éç™»å½•æ¥å£**ï¼Œå³ç”¨æˆ·åœ¨æœªç™»å½•çŠ¶æ€ä¸‹ä¹Ÿå¯è°ƒç”¨ï¼Œä½†ä»…èƒ½è®¿é—®å·²å®¡æ ¸çš„æ–‡ç« ã€‚

å…¶å®å°±æ˜¯åŠ è½½æ–‡ç« åˆ—è¡¨é‚£ä¸€å¥—é€»è¾‘ï¼ŒåŒºåˆ«æ˜¯è¿™é‡ŒåªåŠ è½½è®¿é—®çš„ç”¨æˆ·å‘å¸ƒçš„æ–‡ç« ï¼Œä¼šæ ¹æ®ç™»å½•çŠ¶æ€åŠ¨æ€åŠ è½½æ–‡ç« ï¼š

- æœªç™»å½•ï¼šåŠ è½½"å·²å®¡æ ¸"çš„æ–‡ç« 
- å·²ç™»å½•(éç®¡ç†å‘˜)ï¼šè®¿é—®å…¶ä»–ç”¨æˆ·æ—¶åªèƒ½æŸ¥çœ‹"å·²å®¡æ ¸"çš„æ–‡ç« ï¼Œè®¿é—®è‡ªå·±æ—¶å¯ä»¥çœ‹åˆ°"å¾…å®¡æ ¸"å’Œ"å·²å®¡æ ¸"æ–‡ç« 
- å·²ç™»å½•(ç®¡ç†å‘˜)ï¼šè®¿é—®"å¾…å®¡æ ¸"å’Œ"å·²å®¡æ ¸"æ–‡ç« 

åœ¨`UserCenterController`ä¸­æ·»åŠ ä¸€ä¸ªåŠ è½½å‘æ–‡å†å²çš„æ¥å£`loadUserPostList()`ï¼š

```java
/**
     * åŠ è½½ä¸ªäººä¸­å¿ƒå‘æ–‡åˆ—è¡¨æ¥å£
     *
     * @param userId
     * @return
     */
    @GetMapping("/{userId}/posts")
    @AccessControl
    public Result<List<ArticleVo>> loadUserPostList(HttpSession session,
                                                          @PathVariable @Validation(max = 10) String userId) {
        checkUserId(userId);

        SessionUserinfo userinfo = getUserinfo(session);
        // ä½œè€… && ç®¡ç†å‘˜ èƒ½çœ‹åˆ°å¾…å®¡æ ¸æ–‡ç« ï¼Œå…¶ç”¨æˆ· || æœªç™»å½• åªèƒ½çœ‹åˆ°å·²å®¡æ ¸æ–‡ç« 
        boolean showPadding = !Objects.isNull(userinfo)
                && (userinfo.getIsAdmin() || Objects.equals(userId, userinfo.getUserId()));
        List<ArticleVo> articleVos = articleService.findListByUserAndStatus(userId, showPadding);
        return Result.success(articleVos);
    }
```

é¦–å…ˆè°ƒç”¨`checkUserId()`æ ¡éªŒ`userId`ï¼Œé¿å…ç»•è¿‡å‰ç«¯ç›´æ¥è¯·æ±‚ã€‚ç„¶åè°ƒç”¨`findListByUserAndStatus()`æŸ¥è¯¢æ–‡ç« åˆ—è¡¨ï¼Œè¿™é‡Œæˆ‘å¦å¤–å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢çš„æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¸ä½¿ç”¨ä¹‹å‰åœ¨æ–‡ç« æ¨¡å—è¯·æ±‚æ–‡ç« åˆ—è¡¨æ—¶ä½¿ç”¨çš„æ¡ä»¶æŸ¥è¯¢æ–¹æ³•ï¼Ÿ

ä¸»è¦åœ¨äºæŸ¥è¯¢æ¡ä»¶ï¼Œä¹‹å‰çš„åŠ¨æ€æ§åˆ¶æ–‡ç« çŠ¶æ€çš„æŸ¥è¯¢æ¡ä»¶å¦‚ä¸‹ï¼š

![image-20250321160744576](assets/image-20250321160744576.png)

åœ¨è¿™ä¸ªæ¡ä»¶ä¸­æ§åˆ¶æ–‡ç« çŠ¶æ€æ˜¯é€šè¿‡`userId`å’Œ`isAdmin`å‚æ•°ï¼Œåœ¨å½“å‰çš„æ¥å£ä¸­ï¼Œ`userId`æ˜¯è¯·æ±‚ä¼ é€’çš„å‚æ•°ä¸”ä¸ºå¿…å¡«é¡¹ï¼Œå³ä¾¿ç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œä»–åœ¨è®¿é—®è¿™ä¸ªæ¥å£æ—¶ä¹Ÿä¼šä¼ é€’`userId`ï¼Œæ‰€ä»¥`userId`æ°¸è¿œä¸ä¸º`null`ï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢çš„æ¡ä»¶ï¼Œé‚£ä¹ˆåªä¼šå‡ºç°è¿™ä¸¤è€…æƒ…å†µï¼š

```sql
status != 0
-- æˆ–
status = 2 or (status = 1 and user_id = ?)
```

ä¹Ÿå°±æ˜¯è¯´æœªç™»å½•çš„æƒ…å†µä¸‹å¯ä»¥æŸ¥è¯¢å‡ºç”¨æˆ·å¾…å®¡æ ¸çš„æ–‡ç« ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚å› æ­¤å°±ä¸èƒ½å°†`userId`ä½œä¸ºåŠ¨æ€æ¡ä»¶çš„å‚æ•°ï¼Œå¾—å¦å¤–å®šä¹‰ä¸€ä¸ªå‚æ•°ï¼Œæ¯”å¦‚`showPadding`ï¼Œç”¨æ¥è¡¨ç¤ºæ˜¯å¦å±•ç¤º"å·²å®¡æ ¸"æ–‡ç« ã€‚SQLå¦‚ä¸‹ï¼š

```xml
<!-- é€šè¿‡ userId æŸ¥è¯¢å·²å®¡æ ¸æ–‡ç«  -->
<select id="selectByUserAndStatus" resultType="com.ling.entity.po.Article">
    select
    <include refid="commonField"/>
    from article
    <where>
        <if test="userId != null and userId != ''">
            and user_id = #{userId}
        </if>
        <if test="showPadding != null and showPadding">
            and status in (1, 2)
        </if>
        <if test="showPadding != null and !showPadding">
            and status = 2
        </if>
    </where>
    order by create_time desc
</select>
```

ç„¶åå¢åŠ ç™»å½•çŠ¶æ€å’Œç”¨æˆ·ç±»å‹åˆ¤æ–­æ˜¯å¦å±•ç¤º"å¾…å®¡æ ¸"æ–‡ç« ï¼š

```java
boolean showPadding = !Objects.isNull(userinfo)
                && (userinfo.getIsAdmin() || Objects.equals(userId, userinfo.getUserId()));
```

ä¸šåŠ¡å±‚å®šä¹‰è¿™ä¸ªæŸ¥è¯¢çš„æ–¹æ³•ï¼š

```java
/**
     * é€šè¿‡ userId å’Œ status æŸ¥è¯¢
     *
     * @param userId
     * @param showPadding
     * @return
     */
    List<Article> findListByUserAndStatus(String userId, boolean showPadding);
```

å®ç°ï¼Œè°ƒç”¨SQLæŸ¥è¯¢ï¼Œå°è£…ä¸ºè§†å›¾å®ä½“åè¿”å›ï¼š

```java
@Override
    public List<ArticleVo> findListByUserAndStatus(String userId, boolean showPadding) {
        return articleMapper.selectByUserAndStatus(userId, showPadding).stream()
                .map(e -> {
                    ArticleVo articleVo = new ArticleVo();
                    BeanUtils.copyProperties(e, articleVo);
                    return articleVo;
                }).collect(Collectors.toList());
    }
```

## 1.3 ğŸŒåŠ è½½ç‚¹èµå†å²æ¥å£

æ­¤æ¥å£è¿”å›æŸ¥è¯¢ç”¨æˆ·çš„ç‚¹èµè¯„è®ºæˆ–æ–‡ç« çš„å†å²è®°å½•ï¼Œä¸ºéç™»å½•æ¥å£ã€‚

æ¥å£è¯¦æƒ…ï¼š

```http
GET /web/userCenter/{userId}/likeRecord
```

è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜   |
| ------ | -------- | -------- | ------ |
| userId | `string` | `true`   | ç”¨æˆ·id |

è¿”å›ï¼š

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": [
        {
            "targetId": "39",
            "targetContent": "2çº§è¯„è®º14",
            "targetAuthorId": "2550515268",
            "likerId": "9619980088",
            "likeType": 1,
            "likeTime": "2025-02-19 18:17"
        },
        {
            "targetId": "41",
            "targetContent": "é¸¿æ˜Ÿå°”å…‹ï¼Œto be No.1",
            "targetAuthorId": "9619980088",
            "likerId": "9619980088",
            "likeType": 1,
            "likeTime": "2025-02-19 18:15"
        },
        ......
    ]
}
```

### 1.3.1 æ¥å£å®ç°

å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å»æŸ¥è¯¢ç”¨æˆ·çš„ç‚¹èµè®°å½•ï¼Œæ¡ä»¶æ˜¯`liker_id = userId`ï¼Œä¸è¿‡è¿™é‡Œéœ€è¦åšä¸€ä¸ªè”æŸ¥ï¼Œå› ä¸ºç‚¹èµè®°å½•è¡¨ä¸­åªæœ‰ç›®æ ‡çš„idï¼Œå¹¶æ²¡æœ‰ç›®æ ‡å†…å®¹ï¼Œè€Œæˆ‘ä»¬éœ€è¦ä»æ–‡ç« è¡¨å’Œè¯„è®ºè¡¨ä¸­åˆ†åˆ«æŸ¥è¯¢å‡ºæ ‡é¢˜å’Œè¯„è®ºï¼ŒæŸ¥è¯¢çš„SQLå¦‚ä¸‹ï¼š

```xml
<!-- æŸ¥è¯¢ç‚¹èµå†å² -->
    <select id="selectLikeHistory" resultType="com.ling.entity.vo.LikeRecordVo">
        SELECT lr.like_record_id,
               lr.target_id,
               CASE
                   WHEN lr.like_type = 0 THEN a.title
                   ELSE c.content
                   END AS target_content,
               lr.target_author_id,
               lr.liker_id,
               lr.like_type,
               lr.like_time
        FROM like_record lr
                 LEFT JOIN
             article a ON lr.like_type = 0 AND lr.target_id = a.article_id
                 LEFT JOIN
             comment c ON lr.like_type = 1 AND lr.target_id = c.comment_id
        WHERE lr.liker_id = #{likerId}
        order by like_time desc;
    </select>
```

æ€è·¯æ˜¯å°†ç‚¹èµè®°å½•è¡¨ã€è¯„è®ºè¡¨ã€æ–‡ç« è¡¨è¿›è¡Œå¤–è¿æ¥ï¼Œä»¥ç‚¹èµè¡¨ä¸ºä¸»ï¼Œå°†3å¼ è¿æ¥çš„è¡¨çœ‹ä½œæ•´ä½“ï¼Œä»æ•´ä½“ä¸­æŸ¥è¯¢å‡ºç‚¹èµçš„å­—æ®µã€æ–‡ç« æ ‡é¢˜å’Œè¯„è®ºå†…å®¹ã€‚è¿™æ ·æŸ¥è¯¢å¯¹æ¯”å­æŸ¥è¯¢å¯ä»¥æœ€å¤šç¨‹åº¦ä¿è¯ç´¢å¼•ä¸ä¼šè¢«ç ´åã€‚

æ§åˆ¶å™¨ä¸­å¢åŠ åŠ è½½ç‚¹èµè®°å½•çš„æ¥å£`loadUserLikeRecords`ï¼š

```java
/**
     * åŠ è½½ä¸ªäººä¸­å¿ƒç‚¹èµè®°å½•åˆ—è¡¨æ¥å£
     *
     * @param userId
     * @return
     */
    @GetMapping("/{userId}/likeRecord")
    @AccessControl
    public Result<List<LikeRecordVo>> loadUserLikeRecords(@PathVariable @Validation(max = 10) String userId) {
        checkUserId(userId);
        List<LikeRecordVo> likeRecordVos = likeRecordService.findLikeHistory(userId);
        return Result.success(likeRecordVos);
    }
```

æ ¡éªŒç”¨æˆ·idï¼Œé€šè¿‡åè°ƒç”¨æŸ¥è¯¢ç‚¹èµå†å²çš„æ–¹æ³•ã€‚

åœ¨ä¸šåŠ¡å±‚ä¸­å¢åŠ æŸ¥è¯¢çš„æ–¹æ³•`findLikeHistory()`ï¼š

```java
/**
     * æŸ¥è¯¢ç‚¹èµå†å²
     *
     * @param likerId
     * @return
     */
    List<LikeRecordVo> findLikeHistory(String likerId);
```

å®ç°ï¼Œè°ƒç”¨SQLæ‰§è¡Œï¼š

```java
@Override
    public List<LikeRecordVo> findLikeHistory(String likerId) {
        return likeRecordMapper.selectLikeHistory(likerId);
    }
```

## 1.4 ğŸŒåŠ è½½ç”¨æˆ·è¯„è®ºå†å²æ¥å£

æ­¤æ¥å£è¿”å›ç”¨æˆ·å‘å¸ƒçš„å†å²è¯„è®ºï¼Œä¸ºéç™»å½•æ¥å£ã€‚

æ¥å£è¯¦æƒ…ï¼š

```http
GET /web/userCenter/{userId}/commentRecord
```

è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜   |
| ------ | -------- | -------- | ------ |
| userId | `string` | `true`   | ç”¨æˆ·id |

è¿”å›ï¼š

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": [
        {
            "commentId": 85,
            "pCommentId": 83,
            "articleId": "ababa",
            "imgPath": null,
            "content": "é…è‰²æˆ‘è§‰å¾—è¿˜è¡Œ",
            "senderAvatar": "msakm",
            "senderId": "9619980088",
            "senderNickname": "ling",
            "senderIpAddress": "å››å·çœ",
            "receiverId": "7878970085",
            "receiverNickname": "user_aliyun",
            "likeCount": 0,
            "topType": 0,
            "status": 2,
            "postTime": "2025-02-20 06:09:45",
            "doLike": false,
            "subComment": null
        },
        ......
    ]
}
```

### 1.4.1 æ¥å£å®ç°

æŸ¥è¯¢è¯„è®ºè¡¨ï¼Œè¯„è®ºå‘é€äººä¸ºç”¨æˆ·idï¼Œæˆ‘ä»¬æ„å»ºè¿™æ ·çš„æ¡ä»¶ï¼Œæ·»åŠ æ¥å£`loadCommentRecords()`:

```java
/**
     * åŠ è½½ä¸ªäººä¸­å¿ƒå‘è¯„åˆ—è¡¨æ¥å£
     *
     * @param userId
     * @return
     */
    @GetMapping("/{userId}/commentRecord")
    public Result<List<CommentVo>> loadCommentRecords(@PathVariable @Validation(max = 10) String userId) {
        checkUserId(userId);

        CommentQuery commentQuery = new CommentQuery();
        commentQuery.setSenderId(userId);
        commentQuery.setOrderBy("post_time desc");
        List<CommentVo> commentVos = commentService.findVoListByCondition(commentQuery);

        return Result.success(commentVos);
    }
```

å…ˆæ ¡éªŒç”¨æˆ·idï¼Œç„¶åæ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œè°ƒç”¨`commentService`çš„æ¡ä»¶æŸ¥è¯¢æ–¹æ³•è¿”å›æŸ¥è¯¢é›†ã€‚

## 1.5 ğŸŒåŠ è½½ç”¨æˆ·ç§¯åˆ†è®°å½•æ¥å£

æ¥å£åœ°å€ï¼š

```http
GET /web/userCenter/pointsRecord
```

è¯·æ±‚å‚æ•°ï¼š

| å‚æ•°å    | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜     |
| --------- | -------- | -------- | -------- |
| page      | `string` | `true`   | é¡µç      |
| startDate | `date`   | `true`   | èµ·å§‹æ—¶é—´ |
| endDate   | `date`   | `true`   | ç»“æŸæ—¶é—´ |

è¿”å›ï¼š

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": {
        "total": 21,
        "page": 1,
        "pageSize": 10,
        "pageTotal": 3,
        "rows": [
            {
                "operationType": 2,
                "points": -4,
                "createTime": "2025-03-07 00:03:06"
            },
            {
                "operationType": 3,
                "points": 2,
                "createTime": "2025-03-01 01:09:12"
            },
			......
        ]
    }
}
```

æ­¤æ¥å£ä¸ºç™»å½•æ¥å£ï¼Œè¿”å›å½“å‰ç”¨æˆ·çš„ç§¯åˆ†è®°å½•ï¼Œè¿”å›æ•°æ®æ˜¯åˆ†é¡µæ•°æ®ï¼Œå‚æ•°ä¼ é€’é¡µç ã€å¯å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æ§åˆ¶æŸ¥æ‰¾èŒƒå›´ï¼Œæ¯é¡µæ•°æ®æ¡ç›®é»˜è®¤ä¸º10ã€‚

### 1.5.1 æ¥å£å®ç°

ç›´æ¥è°ƒç”¨ç§¯åˆ†è¡¨æ¡ä»¶æŸ¥è¯¢çš„æ–¹æ³•å³å¯ï¼Œæ§åˆ¶å™¨ä¸­å®šä¹‰æ–¹æ³•ï¼š

```java
/**
     * åŠ è½½ç”¨æˆ·ç§¯åˆ†è®°å½•æ¥å£
     *
     * @param session
     * @param page
     * @param startDate
     * @param endDate
     * @return
     */
    @GetMapping("/pointsRecord")
    @AccessControl(loginRequired = true)
    public Result<PageBean<PointsRecordVo>> loadPointsRecordsHandle(HttpSession session,
                                                                    @Validation(min = 1) Integer page,
                                                                    @DateTimeFormat(pattern = "yyyy-MM-dd") Date startDate,
                                                                    @DateTimeFormat(pattern = "yyyy-MM-dd") Date endDate) {
        page = Objects.isNull(page) ? 1 : page;
        SessionUserinfo sUserinfo = getUserinfo(session);
        UserPointsRecordQuery query = new UserPointsRecordQuery();
        query.setUserId(sUserinfo.getUserId());
        query.setPage(page);
        query.setPageSize(Constant.NUM_10);
        query.setStartDate(startDate);
        query.setEndDate(endDate);
        query.setOrderBy("create_time desc");

        PageBean<PointsRecordVo> resultPage = userPointsRecordService.findVoPageByCondition(query);

        return Result.success(resultPage);
    }
```

æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œè°ƒç”¨æ¡ä»¶æŸ¥è¯¢æ–¹æ³•ï¼Œä¸šåŠ¡å±‚æ¥å£ï¼š

```java
/**
     * æ¡ä»¶æŸ¥è¯¢
     * è¿”å›VoPage
     *
     * @param userPointsRecodeParam
     * @return
     */
    PageBean<PointsRecordVo> findVoPageByCondition(UserPointsRecordQuery userPointsRecodeParam);
```

å®ç°ï¼š

```java
/**
     * æ¡ä»¶è®¡æ•°
     *
     * @param userPointsRecordQueryDto
     * @return
     */
    @Override
    public PageBean<PointsRecordVo> findVoPageByCondition(UserPointsRecordQuery userPointsRecordQueryDto) {
        List<UserPointsRecord> userPointsRecords = userPointsRecordMapper.selectByCondition(userPointsRecordQueryDto);
        Long total = countByCondition(userPointsRecordQueryDto);
        List<PointsRecordVo> rows = userPointsRecords.stream().map(e -> {
            PointsRecordVo pointsRecordVo = new PointsRecordVo();
            BeanUtils.copyProperties(e, pointsRecordVo);
            return pointsRecordVo;
        }).collect(Collectors.toList());
        Integer page = userPointsRecordQueryDto.getPage();
        Integer pageSize = userPointsRecordQueryDto.getPageSize();
        return PageBean.of(total, page, pageSize, rows);
    }
```

## 1.6 ğŸŒæ›´æ–°ç”¨æˆ·ä¿¡æ¯æ¥å£

**æ¥å£æè¿°**

è¯¥æ¥å£ç”¨äºæ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ˜µç§°ã€å¤´åƒã€æ€§åˆ«åŠä¸ªæ€§åŒ–æè¿°ã€‚æ›´æ–°æˆåŠŸåï¼Œç³»ç»Ÿå°†è¿”å›æœ€æ–°çš„ç”¨æˆ·ä¿¡æ¯ã€‚

**æ¥å£åœ°å€**

```http
PUT /web/userCenter/{userId}
```

**è¯·æ±‚å‚æ•°**

| å‚æ•°å      | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜                  |
| ----------- | -------- | -------- | --------------------- |
| userId      | `string` | `true`   | ç”¨æˆ·id                |
| nickname    | `string` | `true`   | æ˜µç§°                  |
| avatar      | `string` | `false`  | å¤´åƒ                  |
| gender      | `int`    | `true`   | 0: å¥³, 1: ç”·, 2: ä¿å¯† |
| description | `string` | `false`  | æè¿°                  |

**è¿”å›å®ä¾‹**

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": {
        "gender": 1,
        "nickname": "ling",
        "description": "xxxxx",
        "avatar": "xxxxx",
        "userId": "9619980088"
    }
}
```

### 1.6.1 æ¥å£å®ç°

åœ¨æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œå¤´åƒå­—æ®µçš„ç‰¹æ®Šæ€§éœ€è¦é¢å¤–å¤„ç†ã€‚ç”±äºéƒ¨åˆ†ä¸šåŠ¡è¡¨ï¼ˆå¦‚æ–‡ç« ã€è¯„è®ºã€æ¶ˆæ¯ç­‰ï¼‰å­˜åœ¨å¤´åƒå†—ä½™å­˜å‚¨ï¼Œå› æ­¤åœ¨ç”¨æˆ·è¡¨æ›´æ–°å¤´åƒåï¼Œè¿™äº›è¡¨ä¹Ÿéœ€åŒæ­¥æ›´æ–°ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚ç›®å‰æ¶‰åŠçš„è¡¨åŒ…æ‹¬ï¼š

- `article`ï¼ˆæ–‡ç« è¡¨ï¼‰
- `comment`ï¼ˆè¯„è®ºè¡¨ï¼‰
- `user_message`ï¼ˆæ¶ˆæ¯è¡¨ï¼‰

åœ¨å¤´åƒæ›´æ–°é€»è¾‘ä¸­ï¼Œéœ€è€ƒè™‘ä»¥ä¸‹ç‰¹æ®Šæƒ…å†µï¼š

1. **å¤´åƒå˜æ›´**ï¼šè‹¥ç”¨æˆ·æ›´æ–°äº†å¤´åƒï¼Œåˆ™éœ€åŒæ­¥ä¿®æ”¹ä¸Šè¿°ä¸šåŠ¡è¡¨ä¸­çš„å†—ä½™å¤´åƒå­—æ®µã€‚
2. **å¤´åƒä¿æŒä¸å˜**ï¼šè‹¥ç”¨æˆ·æäº¤çš„å¤´åƒä¸å½“å‰å¤´åƒç›¸åŒï¼Œåˆ™æ— éœ€è¿›è¡Œæ•°æ®åº“æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„å†™æ“ä½œï¼Œé™ä½æ•°æ®åº“è´Ÿè½½ã€‚
3. **å¤´åƒæ¸…ç©º**ï¼šè‹¥ç”¨æˆ·å¸Œæœ›ç§»é™¤å¤´åƒï¼ˆå³ä¼ å…¥ `null`ï¼‰ï¼Œåˆ™ç³»ç»Ÿåº”å…è®¸å…¶å¤´åƒå­—æ®µç½®ç©ºï¼Œè€Œéä¿æŒåŸå€¼ã€‚

æ‰€ä»¥æˆ‘ä»¬åœ¨æ›´æ–°å®Œç”¨æˆ·è¡¨çš„æ•°æ®åï¼Œä¹Ÿè¦å°†è¿™ä¸‰å¼ è¡¨çš„å¤´åƒæ›´æ–°ï¼Œå¦å¤–æœ‰ä¸€ç§æƒ…å†µéœ€è¦æ³¨æ„ï¼Œå°±æ˜¯æ›´æ–°å‰åå¤´åƒæ˜¯ä¸€æ ·çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±ä¸ç”¨å†å»æ›´æ–°å¤´åƒäº†ï¼ŒåŒæ ·è¿™3å¼ è¡¨ä¹Ÿä¸ç”¨å†æ›´æ–°ï¼Œè¿™æ ·åšå¯ä»¥å‡å°‘æ›´æ–°é¢‘ç‡ï¼Œé™ä½æ•°æ®åº“å‹åŠ›ã€‚

æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„SQLï¼Œæˆ‘ä¸æ‰“ç®—ç”¨é‡‡ç”¨`edit()`ï¼ŒåŸå› åœ¨äºå¤´åƒå­—æ®µçš„æ¡ä»¶ï¼š

```xml
<if test="avatar != null and avatar != ''">avatar = #{avatar},</if>
```

å½“`avatar`ä¸º`null`æ—¶ä¸ä¼šæ›´æ–°å¤´åƒã€‚ä½†å‡å¦‚ç”¨æˆ·æœ¬æ¥æœ‰å¤´åƒï¼Œä»–åˆä¸æƒ³ä½¿ç”¨å¤´åƒäº†ï¼Œä»–ä¼šä¼ é€’`null`è¿‡æ¥ï¼Œè¿™å°±ä¼šå¯¼è‡´å¤´åƒä¸æ›´æ–°ï¼Œæœ¬æ¥ç”¨æˆ·æƒ³å°†å¤´åƒå»æ‰ï¼Œä½†æ˜¯å¤´åƒæœªæ›´æ–°è¿˜æ˜¯åŸæ¥çš„å¤´åƒã€‚

ä¸ºè§£å†³ `null` å½±å“ SQL ç”Ÿæˆçš„é—®é¢˜ï¼Œæ›´æ–° SQL éœ€å»é™¤æ¡ä»¶åˆ¤æ–­ï¼Œç¡®ä¿ `null` ä¹Ÿèƒ½æ­£ç¡®æ›´æ–°ã€‚ä¼˜åŒ–åçš„ SQL å¦‚ä¸‹ï¼š

```xml
<!-- æ›´æ–°ç”¨æˆ·ä¿¡æ¯ -->
    <update id="updateUserinfo">
        update user_info
        set <if test="keepAvatar != null and !keepAvatar">avatar = #{avatar},</if>
            nick_name   = #{nickName},
            gender      = #{gender},
            description = #{description}
        where user_id = #{userId}
    </update>
```

è¿™é‡Œæ–°å¢äº† `keepAvatar` å˜é‡ï¼Œä½œä¸ºå¤´åƒæ›´æ–°çš„æ§åˆ¶æ ‡å¿—ï¼š

- `true`ï¼šä¿æŒå¤´åƒä¸å˜
- `false`ï¼šæ›´æ–°å¤´åƒ

æ§åˆ¶å±‚å¢åŠ æ¥å£ï¼š

```java
/**
     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯æ¥å£
     *
     * @param session
     * @param userId
     * @param nickname
     * @param avatar
     * @param gender
     * @param description
     * @return
     */
    @PutMapping("/{userId}")
    @AccessControl(loginRequired = true)
    public Result<Map<String, Object>> resetUserinfoHandle(HttpSession session,
                                                           @PathVariable @Validation(max = 10) String userId,
                                                           @Validation String nickname,
                                                           String avatar,
                                                           @Validation(max = 2) Integer gender,
                                                           @Validation(required = false, max = 100) String description) {
         // æ ¡éªŒç”¨æˆ· ID
        UserInfo userinfo = checkUserId(userId);
        SessionUserinfo sUserinfo = getUserinfo(session);
        
        // ç¡®ä¿å½“å‰ç”¨æˆ·åªèƒ½ä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯
        if (!Objects.equals(sUserinfo.getUserId(), userId))
            throw new BusinessException(CommonMsg.UNAUTHORIZED_ACCESS);
        
        // å¤„ç†å¤´åƒæ›´æ–°é€»è¾‘
        UserInfo ui = new UserInfo();
        ui.setUserId(userId);
        ui.setNickName(nickname);
        String resAvatar = userinfo.getAvatar();
        boolean keepAvatar = Objects.equals(resAvatar, avatar);
        ui.setAvatar(keepAvatar ? null : avatar);
        ui.setGender(gender);
        ui.setDescription(description);
        ui.setAdmin(sUserinfo.getIsAdmin());
	
        userInfoService.processResetUserinfo(ui, keepAvatar);   // æ›´æ–°ç”¨æˆ·ä¿¡æ¯

        // æ›´æ–°ä¼šè¯ä¿¡æ¯
        if (!keepAvatar) sUserinfo.setAvatar(avatar);
        sUserinfo.setNickName(ui.getNickName());
		
        // è¿”å›æ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯
        Map<String, Object> result = new HashMap<>();
        result.put("userId", userId);
        result.put("nickname", nickname);
        result.put("avatar", keepAvatar ? resAvatar : avatar);
        result.put("gender", gender);
        result.put("description", description);
        return Result.success(result);
    }
```

åœ¨ä¸šåŠ¡å±‚ï¼Œæä¾› `editUserinfo()` æ–¹æ³•ç”¨äºæ‰§è¡Œæ•°æ®åº“æ›´æ–°ï¼Œå¹¶é€šè¿‡ `processResetUserinfo()` å¤„ç†ç”¨æˆ·ä¿¡æ¯å’Œå†—ä½™å¤´åƒçš„åŒæ­¥æ›´æ–°ã€‚

```java
/**
     * å¤„ç†ç”¨æˆ·ä¿¡æ¯æ›´æ–°
     *
     * @param userInfo
     * @param keepAvatar
     * @return
     */
    void processResetUserinfo(UserInfo userInfo, boolean keepAvatar);

    /**
     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯
     *
     * @param userInfo
     * @param keepAvatar
     */
    void editUserinfo(UserInfo userInfo, boolean keepAvatar);
```

å®ç°ï¼š

```java
@Override
    @Transactional(rollbackFor = Exception.class)
    public void processResetUserinfo(UserInfo userInfo, boolean keepAvatar) {
        // æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
        editUserinfo(userInfo, keepAvatar);
        
        // ä»…åœ¨å¤´åƒå‘ç”Ÿå˜æ›´æ—¶ï¼Œæ›´æ–°ä¸šåŠ¡è¡¨çš„å¤´åƒå­—æ®µ
        if (!keepAvatar) {
            articleMapper.updateAvatar(userInfo.getAvatar(), userInfo.getUserId());
            commentMapper.updateAvatar(userInfo.getAvatar(), userInfo.getUserId());
            userMessageMapper.updateAvatar(userInfo.getAvatar(), userInfo.getUserId());
        }
    }

    @Override
    public void editUserinfo(UserInfo userInfo, boolean keepAvatar) {
        userInfoMapper.updateUserinfo(userInfo, keepAvatar);
    }
```

å¦å¤–ï¼Œè¿™3å¼ è¡¨æ›´æ–°å¤´åƒçš„æ–¹æ³•ä¹Ÿè¦é‡æ–°å®šä¹‰ï¼Œå› ä¸ºä¹‹å‰çš„æ›´æ–°æ–¹æ³•æ˜¯é€šè¿‡è¡¨ä¸»é”®æ¥æ›´æ–°ï¼Œè€Œæ­¤å¤„å¤´åƒéœ€è¦æ ¹æ®`user_id`æ¥æ›´æ–°ï¼ŒSQLå¦‚ä¸‹ï¼š

```xml
<!-- æ›´æ–°å¤´åƒ -->
<update id="updateAvatar">
    update article set avatar = #{avatar} where user_id = #{userId}
</update>

<!-- æ›´æ–°å¤´åƒ -->
<update id="updateAvatar">
    update comment set sender_avatar = #{senderAvatar} where sender_id = #{senderId}
</update>

<!-- æ›´æ–°å¤´åƒ -->
<update id="updateAvatar">
    update user_message set sender_avatar = #{senderAvatar} where send_user_id = #{sendUserId}
</update>
```

## 1.7 ğŸŒå‘é€é‚®ç®±éªŒè¯ç æ¥å£

**æ¥å£æè¿°**

æœ¬æ¥å£ç”¨äºå‘ç”¨æˆ·çš„ç»‘å®šé‚®ç®±å‘é€éªŒè¯ç ï¼Œè¯¥éªŒè¯ç å¯ç”¨äºç”¨æˆ·ä¿®æ”¹å¯†ç æˆ–æ‰§è¡Œå…¶ä»–å®‰å…¨æ“ä½œã€‚ç”±äºæœ¬æ¥å£ä»…å…è®¸å·²ç™»å½•ç”¨æˆ·è°ƒç”¨ï¼Œå› æ­¤æ— éœ€é¢å¤–ä¼ é€’é‚®ç®±åœ°å€ï¼Œè€Œæ˜¯**ç›´æ¥ä»å½“å‰ä¼šè¯ä¸­è·å–ç»‘å®šé‚®ç®±**ã€‚

**è¯·æ±‚åœ°å€**

```http
GET /web/userCenter/sendMail
```

**è¯·æ±‚å‚æ•°**

`null`

**è¿”å›å®ä¾‹**

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": null
}
```

### 1.7.1 æ¥å£å®ç°

åœ¨ `UserController` æ§åˆ¶å™¨ä¸­å®šä¹‰ `sendMail()` æ–¹æ³•ï¼Œè°ƒç”¨ **é‚®ä»¶éªŒè¯ç å‘é€æœåŠ¡**ï¼š

```java
/**
     * å‘é€é‚®ç®±éªŒè¯ç æ¥å£
     *
     * @param session
     * @return
     */
    @GetMapping("/sendMail")
    @AccessControl(loginRequired = true)
    public Result<Void> sendMail(HttpSession session) {
        SessionUserinfo userinfo = getUserinfo(session);
        String mail = userinfo.getMail();
        mailCodeService.sendMailCode(mail);
        return Result.success();
    }
```

## 1.8 ğŸŒé‡ç½®å¯†ç æ¥å£

**æ¥å£æè¿°**

æœ¬æ¥å£ç”¨äº**é‡ç½®ç”¨æˆ·å¯†ç **ï¼Œä¾›ç™»å½•åçš„ç”¨æˆ·è¿›è¡Œè®¿é—®ã€‚

**è¯·æ±‚åœ°å€**

```http
PUT /web/userCenter/resetPwd
```

**è¯·æ±‚å‚æ•°**

| å‚æ•°å   | å‚æ•°ç±»å‹ | æ˜¯å¦å¿…å¡« | è¯´æ˜       |
| -------- | -------- | -------- | ---------- |
| mailCode | `string` | `true`   | é‚®ç®±éªŒè¯ç  |
| password | `string` | `true`   | å¯†ç        |

**è¿”å›å®ä¾‹**

```json
{
    "status": "success",
    "code": 200,
    "msg": "è¯·æ±‚æˆåŠŸ",
    "data": null
}
```

### 1.8.1 æ¥å£å®ç°

åœ¨ `UserController` æ§åˆ¶å™¨ä¸­å®šä¹‰ `resetPassword()` æ–¹æ³•ï¼Œè°ƒç”¨ **ç”¨æˆ·æœåŠ¡** æ‰§è¡Œå¯†ç é‡ç½®é€»è¾‘ï¼š

```java
/**
     * é‡ç½®å¯†ç æ¥å£
     *
     * @param session
     * @param mailCode
     * @param password
     * @return
     */
    @PutMapping("/resetPwd")
    @AccessControl(loginRequired = true)
    public Result<Void> resetPassword(HttpSession session,
                                      @Validation String mailCode,
                                      @Validation(regex = RegexEnum.PWD_MEDIUM) String password) {
        SessionUserinfo userinfo = getUserinfo(session);
        userInfoService.resetPwd(userinfo.getMail(), password, mailCode);
        return Result.success();
    }
```



